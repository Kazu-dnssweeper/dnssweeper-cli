---
name: dns-test
description: DNSweeperテストフェーズ実行（統合テスト＋品質保証）
arguments:
  - name: type
    description: テストタイプ (unit/integration/e2e/all)
    default: "all"
---

**テストフェーズ：品質保証と統合テスト**

1. **テスト準備：**
   - テスト環境の確認
   - テストデータの準備
   - モックの設定

2. **テスト実行：**
   {{#if (eq type "unit")}}
   - ユニットテストのみ実行: `npm test`
   {{else if (eq type "integration")}}
   - 統合テストのみ実行
   {{else if (eq type "e2e")}}
   - E2Eテストのみ実行
   {{else}}
   - 全テストスイート実行:
     - ユニットテスト
     - 統合テスト
     - E2Eテスト（該当する場合）
   {{/if}}

3. **品質チェック：**
   - コードカバレッジ分析
   - パフォーマンステスト
   - メモリリーク検査
   - セキュリティ脆弱性スキャン

4. **結果分析：**
   - 失敗したテストの原因調査
   - カバレッジが低い箇所の特定
   - パフォーマンスボトルネックの発見

5. **改善アクション：**
   - テスト失敗の修正
   - 追加テストケースの作成
   - リファクタリング提案

**レポート形式：**
```
🧪 テスト結果サマリー
━━━━━━━━━━━━━━━━━━━━━
✅ 成功: XX件
❌ 失敗: X件
⏭️  スキップ: X件

📊 カバレッジ:
- ステートメント: XX%
- ブランチ: XX%
- 関数: XX%
- 行: XX%

⚡ パフォーマンス:
- 平均実行時間: XXms
- メモリ使用量: XXMB
```

**次のステップ：**
- 品質基準を満たした場合 → リリース準備
- 改善が必要な場合 → 実装フェーズに戻る